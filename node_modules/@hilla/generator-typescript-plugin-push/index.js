import c from"@hilla/generator-typescript-core/Plugin.js";import{PushProcessor as d}from"./PushProcessor.js";const l=["dev.hilla.runtime.transfertypes.Flux","dev.hilla.runtime.transfertypes.EndpointSubscription"];class m extends c{static#e(p){return Object.entries(p).reduce((e,[t,r])=>{const o=r?.post?.responses[200]?.content?.["application/json"]?.schema?.["x-class-name"],[,n,i]=t.split("/");return o&&l.includes(o)?e.has(n)?e.get(n).methodsToPatch.push(i):e.set(n,{methodsToPatch:[i],removeInitImport:!0}):e.has(n)?e.get(n).removeInitImport=!1:e.set(n,{methodsToPatch:[],removeInitImport:!1}),e},new Map)}get path(){return import.meta.url}async execute(p){const{api:e,sources:t}=p,r=this.constructor.#e(e.paths);for(let s=0;s<t.length;s++){const{fileName:a}=t[s],o=a.substring(0,a.indexOf(".ts"));r.has(o)&&(t[s]=new d(t[s],r.get(o)).process())}}}export{m as default};
//# sourceMappingURL=index.js.map
