import{Fragment as h,jsx as r,jsxs as w}from"react/jsx-runtime";import{ValidationError as p}from"@hilla/form";import{Button as d}from"@hilla/react-components/Button.js";import{HorizontalLayout as f}from"@hilla/react-components/HorizontalLayout.js";import{VerticalLayout as y}from"@hilla/react-components/VerticalLayout.js";import{useForm as v}from"@hilla/react-form";import{useEffect as b,useState as E}from"react";import{AutoFormField as S}from"./autoform-field.js";import{getProperties as I,includeProperty as T}from"./property-info.js";const g=Symbol();function V({service:l,model:i,item:t,onSubmitError:m,afterSubmit:n,disabled:s}){const o=v(i,{onSubmit:async e=>l.save(e)}),[a,u]=E("");b(()=>{t!==g&&o.read(t)},[t]);async function c(){try{u("");const e=await o.submit();if(e===void 0)throw new Error("generic error");n&&n({item:e})}catch(e){if(e instanceof p)return;m?m({error:e}):u("Something went wrong, please check all your values")}}return w(y,{theme:"padding",children:[I(i).filter(T).map(e=>r(S,{propertyInfo:e,form:o,disabled:s},e.name)),a?r("div",{style:{color:"var(--lumo-error-color)"},children:a}):r(h,{}),r(f,{style:{marginTop:"var(--lumo-space-m)"},children:r(d,{disabled:s,onClick:c,children:"Submit"})})]})}export{V as ExperimentalAutoForm,g as defaultItem};
//# sourceMappingURL=autoform.js.map
