{
  "version": 3,
  "sources": ["src/EndpointMethodResponseProcessor.ts"],
  "sourcesContent": ["import type Plugin from '@hilla/generator-typescript-core/Plugin.js';\nimport type DependencyManager from '@hilla/generator-typescript-utils/dependencies/DependencyManager.js';\nimport type { OpenAPIV3 } from 'openapi-types';\nimport type { ReadonlyDeep } from 'type-fest';\nimport type { TypeNode } from 'typescript';\nimport TypeSchemaProcessor from './TypeSchemaProcessor.js';\nimport { defaultMediaType } from './utils.js';\n\nexport type EndpointMethodResponses = ReadonlyDeep<OpenAPIV3.ResponsesObject>;\nexport type EndpointMethodResponse = ReadonlyDeep<OpenAPIV3.ResponseObject>;\n\nexport default class EndpointMethodResponseProcessor {\n  readonly #code: string;\n  readonly #dependencies: DependencyManager;\n  readonly #owner: Plugin;\n  readonly #response: EndpointMethodResponse;\n\n  constructor(\n    code: string,\n    response: EndpointMethodResponses[string],\n    dependencyManager: DependencyManager,\n    owner: Plugin,\n  ) {\n    this.#code = code;\n    this.#owner = owner;\n    this.#dependencies = dependencyManager;\n    this.#response = owner.resolver.resolve(response);\n  }\n\n  process(): readonly TypeNode[] {\n    switch (this.#code) {\n      case '200':\n        return this.#processOk();\n      default:\n        this.#owner.logger.warn(`Response code '${this.#code} is not supported'`);\n        return [];\n    }\n  }\n\n  #processOk(): readonly TypeNode[] {\n    const rawSchema = this.#response.content?.[defaultMediaType]?.schema;\n\n    return rawSchema ? new TypeSchemaProcessor(rawSchema, this.#dependencies).process() : [];\n  }\n}\n"],
  "mappings": "AAKA,OAAOA,MAAyB,2BAChC,OAAS,oBAAAC,MAAwB,aAKjC,MAAOC,CAA8C,CAC1CC,GACAC,GACAC,GACAC,GAET,YACEC,EACAC,EACAC,EACAC,EACA,CACA,KAAKP,GAAQI,EACb,KAAKF,GAASK,EACd,KAAKN,GAAgBK,EACrB,KAAKH,GAAYI,EAAM,SAAS,QAAQF,CAAQ,CAClD,CAEA,SAA+B,CAC7B,OAAQ,KAAKL,GAAO,CAClB,IAAK,MACH,OAAO,KAAKQ,GAAW,EACzB,QACE,YAAKN,GAAO,OAAO,KAAK,kBAAkB,KAAKF,EAAK,oBAAoB,EACjE,CAAC,CACZ,CACF,CAEAQ,IAAkC,CAChC,MAAMC,EAAY,KAAKN,GAAU,UAAUL,CAAgB,GAAG,OAE9D,OAAOW,EAAY,IAAIZ,EAAoBY,EAAW,KAAKR,EAAa,EAAE,QAAQ,EAAI,CAAC,CACzF,CACF",
  "names": ["TypeSchemaProcessor", "defaultMediaType", "EndpointMethodResponseProcessor", "#code", "#dependencies", "#owner", "#response", "code", "response", "dependencyManager", "owner", "#processOk", "rawSchema"]
}
