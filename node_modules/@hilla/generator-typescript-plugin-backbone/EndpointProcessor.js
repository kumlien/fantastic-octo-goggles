import a from"@hilla/generator-typescript-plugin-client";import p from"@hilla/generator-typescript-utils/createSourceFile.js";import l from"@hilla/generator-typescript-utils/dependencies/DependencyManager.js";import s from"@hilla/generator-typescript-utils/dependencies/PathManager.js";import{OpenAPIV3 as c}from"openapi-types";import d,{HILLA_FRONTEND_NAME as m,INIT_TYPE_NAME as P}from"./EndpointMethodOperationProcessor.js";class i{static async create(t,r,e,n){const o=new i(t,r,e,n);return o.#e.imports.default.add(o.#e.paths.createRelativePath(await a.getClientFileName(n)),"client"),o.#e.imports.named.add(o.#e.paths.createBareModulePath(m),P),o}#i=new s({extension:"ts"});#e=new l(new s({extension:".js"}));#n;#t;#o;#r;constructor(t,r,e,n){this.#t=t,this.#r=r,this.#n=e,this.#o=n}async process(){this.#r.logger.debug(`Processing endpoint: ${this.#t}`);const t=(await Promise.all(Array.from(this.#n,async([n,o])=>this.#s(n,o)))).flatMap(n=>n),{exports:r,imports:e}=this.#e;return p([...e.toCode(),...t,...r.toCode()],this.#i.createRelativePath(this.#t))}async#s(t,r){return this.#r.logger.debug(`Processing endpoint method: ${this.#t}.${t}`),(await Promise.all(Object.values(c.HttpMethods).filter(e=>r[e]).map(async e=>d.createProcessor(e,this.#t,t,r[e],this.#e,this.#r)?.process(this.#o)))).filter(Boolean)}}export{i as default};
//# sourceMappingURL=EndpointProcessor.js.map
