import{jsx as r}from"react/jsx-runtime";import{useContext as a}from"react";import{Navigate as d,useLocation as l}from"react-router-dom";import{AuthContext as p}from"./useAuth.js";function R({redirectPath:t,access:e,element:o}){const{state:{initializing:n,loading:c,user:i},hasAccess:u}=a(p),h=l();return n||c?r("div",{}):u(e)?o:r(d,{to:t,state:{from:h},replace:!0})}const s=t=>{const e=[];return t.forEach(o=>{e.push(o),o.children!==void 0&&e.push(...s(o.children))}),e},b=(t,e="/login")=>(s(t).forEach(n=>{const{handle:c}=n;(c?.requiresLogin??c?.rolesAllowed?.length)&&(n.element=r(R,{redirectPath:e,access:n.handle,element:n.element}))}),t);export{b as protectRoutes};
//# sourceMappingURL=ProtectedRoute.js.map
