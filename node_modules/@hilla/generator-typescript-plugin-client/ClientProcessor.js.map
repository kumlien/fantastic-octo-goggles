{
  "version": 3,
  "sources": ["src/ClientProcessor.ts"],
  "sourcesContent": ["import type Plugin from '@hilla/generator-typescript-core/Plugin.js';\nimport createFullyUniqueIdentifier from '@hilla/generator-typescript-utils/createFullyUniqueIdentifier.js';\nimport createSourceFile from '@hilla/generator-typescript-utils/createSourceFile.js';\nimport DependencyManager from '@hilla/generator-typescript-utils/dependencies/DependencyManager.js';\nimport PathManager from '@hilla/generator-typescript-utils/dependencies/PathManager.js';\nimport ts, { type SourceFile } from 'typescript';\n\nexport default class ClientProcessor {\n  readonly #owner: Plugin;\n  readonly #outputPath: string;\n\n  constructor(fileName: string, owner: Plugin) {\n    this.#outputPath = new PathManager({ extension: 'ts' }).createRelativePath(fileName);\n    this.#owner = owner;\n  }\n\n  process(): SourceFile {\n    this.#owner.logger.debug(`Generating ${this.#outputPath}`);\n\n    const { exports, imports, paths } = new DependencyManager(new PathManager({ extension: '.js' }));\n    const clientClassId = imports.named.add(paths.createBareModulePath('@hilla/frontend', false), 'ConnectClient');\n\n    const clientVarId = createFullyUniqueIdentifier('client');\n    exports.default.set(clientVarId);\n\n    const declaration = ts.factory.createVariableStatement(\n      undefined,\n      ts.factory.createVariableDeclarationList(\n        [\n          ts.factory.createVariableDeclaration(\n            clientVarId,\n            undefined,\n            undefined,\n            ts.factory.createNewExpression(clientClassId, undefined, [\n              ts.factory.createObjectLiteralExpression(\n                [\n                  ts.factory.createPropertyAssignment(\n                    ts.factory.createIdentifier('prefix'),\n                    ts.factory.createStringLiteral('connect'),\n                  ),\n                ],\n                false,\n              ),\n            ]),\n          ),\n        ],\n        ts.NodeFlags.Const,\n      ),\n    );\n\n    return createSourceFile([...imports.toCode(), declaration, ...exports.toCode()], this.#outputPath);\n  }\n}\n"],
  "mappings": "AACA,OAAOA,MAAiC,mEACxC,OAAOC,MAAsB,wDAC7B,OAAOC,MAAuB,sEAC9B,OAAOC,MAAiB,gEACxB,OAAOC,MAA6B,aAEpC,MAAOC,CAA8B,CAC1BC,GACAC,GAET,YAAYC,EAAkBC,EAAe,CAC3C,KAAKF,GAAc,IAAIJ,EAAY,CAAE,UAAW,IAAK,CAAC,EAAE,mBAAmBK,CAAQ,EACnF,KAAKF,GAASG,CAChB,CAEA,SAAsB,CACpB,KAAKH,GAAO,OAAO,MAAM,cAAc,KAAKC,EAAW,EAAE,EAEzD,KAAM,CAAE,QAAAG,EAAS,QAAAC,EAAS,MAAAC,CAAM,EAAI,IAAIV,EAAkB,IAAIC,EAAY,CAAE,UAAW,KAAM,CAAC,CAAC,EACzFU,EAAgBF,EAAQ,MAAM,IAAIC,EAAM,qBAAqB,kBAAmB,EAAK,EAAG,eAAe,EAEvGE,EAAcd,EAA4B,QAAQ,EACxDU,EAAQ,QAAQ,IAAII,CAAW,EAE/B,MAAMC,EAAcX,EAAG,QAAQ,wBAC7B,OACAA,EAAG,QAAQ,8BACT,CACEA,EAAG,QAAQ,0BACTU,EACA,OACA,OACAV,EAAG,QAAQ,oBAAoBS,EAAe,OAAW,CACvDT,EAAG,QAAQ,8BACT,CACEA,EAAG,QAAQ,yBACTA,EAAG,QAAQ,iBAAiB,QAAQ,EACpCA,EAAG,QAAQ,oBAAoB,SAAS,CAC1C,CACF,EACA,EACF,CACF,CAAC,CACH,CACF,EACAA,EAAG,UAAU,KACf,CACF,EAEA,OAAOH,EAAiB,CAAC,GAAGU,EAAQ,OAAO,EAAGI,EAAa,GAAGL,EAAQ,OAAO,CAAC,EAAG,KAAKH,EAAW,CACnG,CACF",
  "names": ["createFullyUniqueIdentifier", "createSourceFile", "DependencyManager", "PathManager", "ts", "ClientProcessor", "#owner", "#outputPath", "fileName", "owner", "exports", "imports", "paths", "clientClassId", "clientVarId", "declaration"]
}
