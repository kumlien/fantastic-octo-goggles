import a from"@apidevtools/swagger-parser";import i from"typescript";import s from"./File.js";import g from"./PluginManager.js";import p from"./ReferenceResolver.js";class l{#e;#t;#r;#o;constructor(r,e){this.#r=new a,this.#t=new g(r,new p(this.#r),e.logger),this.#e=e.logger,this.#o=e.outputDir}async process(r){this.#e.global.debug("Processing OpenAPI");const t={api:await this.#r.bundle(JSON.parse(r)),apiRefs:this.#r.$refs,outputDir:this.#o,pluginStorage:new Map,sources:[]};this.#e.global.debug("Executing plugins"),await this.#t.execute(t),this.#e.global.debug("Printing files");const n=i.createPrinter({newLine:i.NewLineKind.LineFeed});return t.sources.map(o=>new s([n.printFile(o)],o.fileName))}}export{l as default};
//# sourceMappingURL=Generator.js.map
